<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Record Management</title>
    <link rel="stylesheet" href="css/main.css" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="js/main.js"></script>
	
</head>
<body>

<h1>Student Record Management</h1>

<form id="inputs">
<div>
  <label for="fullName">Full Name</label>
  <input type="text" name="fullName" id="fullName" />
</div>

<div>
  <label for="major">Major</label>
  <input type="text" name="major" id="major" />
</div>

<div>
  <label for="startYear">Start Year</label>
  <input type="text" name="startYear" id="startYear" />
</div>

<div id="buttonParent">
<input type="button" value="Add Record" id="addRec" />
</div>
</form>
    <button onclick=""></button>
<br />
<button type="button"  >Load Data</button>
<br/>
<h1>Entered Records:</h1>

<ul id="enteredRecords">
</ul>

<script type="text/javascript">
	$(function(){
        search();
        $("#addRec").click(function () {
            var model = {
                "fullName": $("#fullName").val(),
                "major": $("#major").val(),
                "startYear": Number($("#startYear").val())
            };
            add(model);
        });

    });

    function search() {
        $.get("http://localhost:8081/data/entries.json", {}, function (data) {
            if (data.records && data.records.length > 0) {
                var htmlStr = "";
                var date = new Date()
                var hours = date.getHours().toString().padStart(2, '0')
                var minutes = date.getMinutes().toString().padStart(2, '0')
                var time = hours + ':' + minutes
                for (var i = 0; i < data.records.length; i++) {
                    var deleteStr = "<button onclick='remove(\"" + data.records[i].id +"\")'>Delete</button>"
                    htmlStr = htmlStr + "<li>" + time + ' - ' + data.records[i].fullName + ", " + data.records[i].major + ", " + data.records[i].startYear + ", " + deleteStr + "</li>"
                }
                $("#enteredRecords").html(htmlStr);
            }
        });
    }

 
</script>
</body>
</html>